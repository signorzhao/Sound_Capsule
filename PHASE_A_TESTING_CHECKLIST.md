# 🧪 Phase A 前端认证测试清单

**测试时间**: _______________
**测试人员**: _______________
**测试环境**: 开发环境 (localhost)

---

## 📋 测试前准备

### 服务状态检查
- [ ] API 服务器运行: http://localhost:5002
- [ ] 前端服务器运行: http://localhost:3000
- [ ] 数据库已清理（无测试用户）

### 浏览器准备
- [ ] 打开浏览器开发者工具 (F12)
- [ ] 切换到 Console 标签
- [ ] 切换到 Network 标签
- [ ] 清除浏览器缓存和 LocalStorage

---

## ✅ 测试场景

### 场景 1: 未登录访问应用

**步骤**:
1. 访问 http://localhost:3000
2. 观察浏览器地址栏 URL

**预期结果**:
- [ ] URL 自动变为 `/login`
- [ ] 显示登录页面（紫色渐变背景）
- [ ] 看到 "Sound Capsule" 标题
- [ ] 看到 "登录到您的账户" 文字
- [ ] 看到登录表单（用户名、密码输入框）
- [ ] 看到 "立即注册" 链接

**实际结果**: ___________________

---

### 场景 2: 用户注册

**步骤**:
1. 点击 "立即注册" 链接
2. 填写注册表单：
   ```
   用户名: demo001
   邮箱: demo001@example.com
   密码: DemoPass123
   确认密码: DemoPass123
   ```
3. 点击 "注册" 按钮
4. 观察 Network 标签的请求
5. 观察 Console 的输出
6. 观察页面跳转

**预期结果**:
- [ ] URL 跳转到 `/register`
- [ ] 显示注册表单
- [ ] 看到密码要求提示
- [ ] 点击注册后 Network 标签显示:
  - [ ] `POST /api/auth/register` 请求
  - [ ] 状态码: 201 或 200
  - [ ] 响应包含 `success: true`
- [ ] Console 无错误
- [ ] 自动跳转到主应用 (`/`)
- [ ] 可以正常使用主应用功能

**实际结果**: ___________________

**Console 截图** (如有错误):
```
(粘贴 Console 输出)
```

**Network 截图**:
```
请求: POST /api/auth/register
响应:
(粘贴响应内容)
```

---

### 场景 3: 登录状态持久化

**步骤**:
1. 确保已登录（场景 2 之后）
2. 打开开发者工具 → Application → Local Storage
3. 检查存储的 Token
4. 关闭浏览器标签页
5. 重新打开访问 http://localhost:3000

**预期结果**:
- [ ] LocalStorage 中有 `access_token`
- [ ] LocalStorage 中有 `refresh_token`
- [ ] 重新访问时无需登录
- [ ] 直接进入主应用
- [ ] URL 显示 `/`

**实际结果**: ___________________

**LocalStorage 内容**:
```json
{
  "access_token": "...",
  "refresh_token": "..."
}
```

---

### 场景 4: 用户注销

**步骤**:
1. 在主应用中（目前可能没有注销按钮，手动测试）:
   - 打开 Console
   - 执行: `localStorage.clear()`
   - 刷新页面 (Cmd+R 或 F5)

**预期结果**:
- [ ] LocalStorage 被清空
- [ ] 刷新后自动跳转到 `/login`
- [ ] 显示登录页面

**实际结果**: ___________________

---

### 场景 5: 重新登录

**步骤**:
1. 在登录页面填写：
   ```
   用户名或邮箱: demo001
   密码: DemoPass123
   ```
2. 点击 "登录" 按钮
3. 观察 Network 标签

**预期结果**:
- [ ] Network 显示 `POST /api/auth/login`
- [ ] 状态码: 200
- [ ] 响应包含 `success: true`
- [ ] 响应包含用户信息和 tokens
- [ ] 自动跳转到主应用
- [ ] 可以正常使用

**实际结果**: ___________________

---

### 场景 6: 错误处理 - 错误密码

**步骤**:
1. 先注销（清除 LocalStorage）
2. 在登录页面填写：
   ```
   用户名或邮箱: demo001
   密码: WrongPassword123
   ```
3. 点击 "登录" 按钮

**预期结果**:
- [ ] 显示错误提示
- [ ] 错误信息: "用户名或密码错误"
- [ ] 不跳转页面
- [ ] 仍在登录页面

**实际结果**: ___________________

---

### 场景 7: 错误处理 - 用户已存在

**步骤**:
1. 访问注册页面 (`/register`)
2. 使用已存在的用户名注册：
   ```
   用户名: demo001
   邮箱: another@example.com
   密码: TestPass123
   确认密码: TestPass123
   ```
3. 点击 "注册" 按钮

**预期结果**:
- [ ] 显示错误提示
- [ ] 错误信息: "用户名已存在"
- [ ] 不跳转页面

**实际结果**: ___________________

---

### 场景 8: Token 过期（手动模拟）

**步骤**:
1. 登录后，打开开发者工具 → Application → Local Storage
2. 修改 `access_token` 为无效值: `invalid_token_12345`
3. 刷新页面

**预期结果**:
- [ ] 尝试获取用户信息失败
- [ ] 应该重定向到登录页
- [ ] 或显示错误提示

**实际结果**: ___________________

---

## 🐛 问题记录

### 发现的问题

| # | 问题描述 | 严重程度 | 状态 |
|---|---------|---------|------|
| 1 | | 🔴 Critical ⚠️ Major 🔵 Minor | 🅾️ Open ✅ Fixed |
| 2 | | | |
| 3 | | | |

---

## 📊 测试总结

### 通过的测试
- [ ] 场景 1: 未登录访问
- [ ] 场景 2: 用户注册
- [ ] 场景 3: 登录持久化
- [ ] 场景 4: 用户注销
- [ ] 场景 5: 重新登录
- [ ] 场景 6: 错误密码
- [ ] 场景 7: 用户已存在
- [ ] 场景 8: Token 过期

### 测试结果统计
- 总测试数: 8
- 通过: ___
- 失败: ___
- 通过率: ___%

### 总体评价
- [ ] ✅ 所有功能正常，可以继续 Phase B
- [ ] ⚠️ 有小问题，需要修复后继续
- [ ] ❌ 有严重问题，需要修复后重新测试

---

## 💬 反馈和建议

**用户界面**:
- 登录页面美观度: ⭐⭐⭐⭐⭐
- 注册页面易用性: ⭐⭐⭐⭐⭐
- 错误提示清晰度: ⭐⭐⭐⭐⭐

**功能体验**:
- 注册流程顺畅度: ⭐⭐⭐⭐⭐
- 登录响应速度: ⭐⭐⭐⭐⭐
- 跳转逻辑正确性: ⭐⭐⭐⭐⭐

**其他反馈**:
```
(请记录您的意见和建议)
```

---

**测试完成时间**: _______________
**测试人员签名**: _______________
