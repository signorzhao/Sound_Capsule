# 🔴 注销按钮功能测试指南

**新增功能**: 用户菜单 + 注销按钮
**测试时间**: _______________

---

## 🎯 功能说明

### 新增组件

1. **UserMenu 组件**
   - 显示在应用右上角
   - 显示当前用户信息
   - 下拉菜单包含注销按钮

2. **功能特性**
   - 点击用户名打开下拉菜单
   - 显示用户头像、用户名、邮箱
   - 注销按钮带加载状态
   - 点击外部区域关闭菜单

---

## ✅ 测试步骤

### 1️⃣ 查看用户菜单

**步骤**:
1. 确保已登录
2. 访问主应用 (http://localhost:3000)
3. 查看页面右上角

**预期结果**:
- [ ] 看到用户菜单按钮
- [ ] 显示用户图标
- [ ] 显示用户名（如 demo001）
- [ ] 显示向下箭头图标
- [ ] 按钮有半透明背景
- [ ] 鼠标悬停时背景变深

**实际结果**: ___________________

**截图或描述**:
```
（描述或粘贴截图）
```

---

### 2️⃣ 打开下拉菜单

**步骤**:
1. 点击右上角的用户菜单按钮

**预期结果**:
- [ ] 下拉菜单向下滑入（动画效果）
- [ ] 显示用户信息区域
  - [ ] 圆形头像（紫色渐变背景）
  - [ ] 显示名称（display_name 或 username）
  - [ ] 显示邮箱地址
- [ ] 显示分隔线
- [ ] 显示注销按钮（红色文字）
- [ ] 向下箭头旋转 180 度

**实际结果**: ___________________

**显示的信息**:
```
用户名: _______________
邮箱: _______________
```

---

### 3️⃣ 关闭下拉菜单

**步骤**:
1. 打开下拉菜单
2. 点击菜单外部的任意位置

**预期结果**:
- [ ] 下拉菜单关闭
- [ ] 向下箭头恢复原状
- [ ] 可以重新打开菜单

**实际结果**: ___________________

---

### 4️⃣ 测试注销功能

**步骤**:
1. 打开下拉菜单
2. 点击"注销"按钮
3. 观察：
   - 按钮状态变化
   - 页面跳转
   - LocalStorage 变化

**预期结果**:
- [ ] 按钮文字变为"注销中..."
- [ ] 按钮被禁用（无法再次点击）
- [ ] LocalStorage 被清空
  - [ ] `access_token` 删除
  - [ ] `refresh_token` 删除
- [ ] 自动跳转到登录页面 (`/login`)
- [ ] 可以使用其他账户重新登录

**实际结果**: ___________________

**验证 LocalStorage**:
```javascript
// 打开 Console 执行
console.log('Access Token:', localStorage.getItem('access_token'));
console.log('Refresh Token:', localStorage.getItem('refresh_token'));
// 都应该输出: null
```

---

### 5️⃣ 注销后重新登录

**步骤**:
1. 确认已注销（在登录页面）
2. 使用之前的账户登录
3. 验证功能正常

**预期结果**:
- [ ] 可以成功登录
- [ ] 用户菜单显示正确的用户信息
- [ ] 可以正常使用应用
- [ ] 可以再次注销

**实际结果**: ___________________

---

## 🎨 UI 预览

### 用户菜单按钮（未打开）
```
┌─────────────────────────┐
│  [👤] demo001 [▼]       │  ← 右上角
└─────────────────────────┘
```

### 下拉菜单（已打开）
```
┌──────────────────────────────┐
│  [头像]  demo001              │
│          demo001@example.com  │
│  ───────────────────────────  │
│  [🚪] 注销                   │
└──────────────────────────────┘
```

---

## 🐛 问题记录

### 发现的问题

| # | 问题描述 | 严重程度 | 状态 |
|---|---------|---------|------|
| 1 | | 🔴 Critical ⚠️ Major 🔵 Minor | 🅾️ Open ✅ Fixed |
| 2 | | | |

### 问题描述
```
（记录发现的任何问题）
```

---

## 💬 反馈

### UI 评价
- 菜单位置: ⭐⭐⭐⭐⭐
- 菜单样式: ⭐⭐⭐⭐⭐
- 动画效果: ⭐⭐⭐⭐⭐
- 用户信息显示: ⭐⭐⭐⭐⭐

### 功能评价
- 注销速度: ⭐⭐⭐⭐⭐
- 状态反馈: ⭐⭐⭐⭐⭐
- 易用性: ⭐⭐⭐⭐⭐

### 改进建议
```
（请记录您的建议）
```

---

## ✅ 测试总结

### 通过的测试
- [ ] 用户菜单显示正确
- [ ] 下拉菜单打开/关闭正常
- [ ] 用户信息显示正确
- [ ] 注销功能正常工作
- [ ] LocalStorage 正确清除
- [ ] 注销后跳转正确
- [ ] 可以重新登录

### 测试结果
- 总测试数: 7
- 通过: ___
- 失败: ___
- 通过率: ___%

### 总体评价
- [ ] ✅ 所有功能正常
- [ ] ⚠️ 有小问题，但不影响使用
- [ ] ❌ 有严重问题，需要修复

---

**测试完成时间**: _______________
**测试人员**: _______________
